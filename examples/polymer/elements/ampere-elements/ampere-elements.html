<link rel="import" href="../ampere-splash/ampere-splash.html">
<link rel="import" href="../ampere-app/ampere-app.html">
<link rel="import" href="../ampere-status/ampere-status.html">
<link rel="import" href="../ampere-view/ampere-view.html">
<link rel="import" href="../ampere-transition/ampere-transition.html">
<link rel="import" href="../ampere-overlay/ampere-overlay.html">
<link rel="import" href="../ampere-theme/ampere-theme.html">

<script>
PolymerExpressions.prototype.transitions = function(app, scope) {
  var transitions = [];

  Object.keys(app.view.state.module.transitions).forEach(function(name) {
    var transition=app.view.state.module.transitions[name],
        type      =transition.options[Ampere.default.UI.SCOPE]
    ;

    (type===scope) && transitions.push(transition);
  });

  Object.keys(app.view.state.transitions).forEach(function(name) {
    var transition=app.view.state.transitions[name],
        type      =transition.options[Ampere.default.UI.SCOPE]
    ;

    (type===scope) && transitions.push(transition);
  });

  console.log( "transitions[" + scope + "]=", transitions);
  return transitions;
};

PolymerExpressions.prototype.caption = function(obj, defaultValue) {
  obj = obj || {};
  var s = (obj.options || obj)[window.Ampere.default.UI.CAPTION];
  (typeof(s)==='function') && (s=s(obj));
  if(s===undefined) {
    s = obj.name;
  }
  return s || defaultValue;
};

PolymerExpressions.prototype.icon = function(obj, defaultValue) {
  obj = obj || {};
  var s = (obj.options || obj)[window.Ampere.default.UI.ICON] || '';
  (typeof(s)==='function') && (s=s(obj));
  return s || defaultValue;
};

PolymerExpressions.prototype.description = function(obj, defaultValue) {
  obj = obj || {};
  var s = (obj.options || obj)[window.Ampere.default.UI.DESCRIPTION] || '';
  (typeof(s)==='function') && (s=s(obj));
  return s || defaultValue;
};

PolymerExpressions.prototype.stringify = function(arg, prettyprint) {
  return prettyprint ? JSON.stringify(arg, null, '  ') : JSON.stringify(arg);
};

/*
PolymerExpressions.prototype.values = function(arg) {
  if(arg instanceof Array) {
    return arg;
  } else if((arg instanceof Map) || (arg instanceof WeakMap) || (arg instanceof Set)) {
    return Array.from(arg.values());
  } else if( arg instanceof Iterator) {
    return Array.from(iterator);
  } else if( arg[Symbol.iterator]) {
    return Array.from(arg[Symbol.iterator]());
  } else if( arg instanceof Object) {
    Object.getOwnPropertyNames(arg).map(function(name) {
      return arg[name];
    });
  } else {
    throw new Error( "dont know how to extract values from " + arg);
  }
};

PolymerExpressions.prototype.keys = function(arg) {
	if(arg instanceof Array) {
    return arg;
  } else if((arg instanceof Map) || (arg instanceof WeakMap) || (arg instanceof Set)) {
    return Array.from(arg.keys());
  } else if( arg instanceof Iterator) {
    return Array.from(iterator);
  } else if( arg[Symbol.iterator]) {
    return Array.from(arg[Symbol.iterator]());
  } else if( arg instanceof Object) {
    return Object.getOwnPropertyNames(arg);
  } else {
    throw new Error( "dont know how to extract keys from " + arg);
  }
};
*/
</script>
